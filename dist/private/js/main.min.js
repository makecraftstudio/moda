/**
 * vida-cotidiana - bam app
 * @version v1.0.0
 * @link https://www.aditivointeractivegroup.com
 * @license ISC
 */
function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ProjectConfig{constructor(){_defineProperty(this,"getData",(()=>{$.ajax({url:"json/config.json",type:"post",dataType:"json",success:this.loadData,error:()=>{console.log("Error al cargar config.json")}})})),_defineProperty(this,"loadData",(e=>{this._isMuseum=e.isMuseum,this._rememberLanguage=e.rememberLanguage,this._defaultLanguage=e.defaultLanguage,this._rememberLanguage&&localStorage.setItem("language",this._defaultLanguage),this._updateTime=e.updateTime,this._defaultApp=e.defaultApp,this._exitScreenSaverTime=e.exitScreenSaverTime,this._isDebug=e.isDebug,this._showContextMenu=e.showContextMenu,this._showMouse=e.showMouse,this._isFullScreen=e.isFullScreen,this._dataURL=e.dataURL,this._iddleTimeCheck=e.iddleTimeCheck,this._closingHour=e.closingHour,this._questionTime=e.questionTime,this._tipTime=e.tipTime,this._qrTime=e.qrTime;var t=new CustomEvent("onLoad",{detail:e});document.dispatchEvent(t)})),_defineProperty(this,"closeApp",(()=>{var e,t=this._iddleTimeCheck;setInterval((()=>{if(e=new Date,e.getHours()>=this._closingHour){console.log("is closing time"),this._isAppClosed=!0;var t=new CustomEvent("isClosingTime");document.dispatchEvent(t)}}),t)})),_defineProperty(this,"setDefaults",(()=>{this.showMouse?$("*").hasClass("cursor-none")&&$("*").removeClass("cursor-none"):$("*").hasClass("cursor-none")||$("*").addClass("cursor-none"),console.log("on show mouse"),this.showContextMenu?window.addEventListener("contextmenu",(function(e){}),!1):window.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1)})),_defineProperty(this,"toggleMouse",(()=>{this.showMouse=!this.showMouse,this.setDefaults(),console.log(this.showMouse)})),_defineProperty(this,"toggleContextMenu",(()=>{this.showContextMenu=!this.showContextMenu,this.setDefaults()})),this._isMuseum=!0,this._rememberLanguage=!1,this._defaultLanguage="es",this._updateTime=6e5,this.defaultApp=0,this._exitScreenSaverTime="18:00",this._isDebug,this._showContextMenu,this._showMouse=!1,this._isFullScreen=!0,this._iddleTimeCheck=3e5,this._dataURL,this._isAppClosed=!1,this._closingHour=22,this._logoPath="logo.svg",this._questionTime=5e3,this._tipTime=5e3,this._qrTime=15}get isMuseum(){return this._isMuseum}set isMuseum(e){this._isMuseum=e}get rememberLanguage(){return this._rememberLanguage}set rememberLanguage(e){this._rememberLanguage=e}get defaultLanguage(){return this._defaultLanguage}set defaultLanguage(e){this._defaultLanguage=e}get updateTime(){return this._updateTime}set updateTime(e){this._updateTime=e}get dataURL(){return this._dataURL}set dataURL(e){this._dataURL=e}get iddleTimeCheck(){return this._iddleTimeCheck}set iddleTimeCheck(e){this._iddleTimeCheck=e}get isAppClosed(){return this._isAppClosed}set isAppClosed(e){this._isAppClosed=e}get closingHour(){return this._closingHour}set closingHour(e){this._closingHour=e}get questionTime(){return this._questionTime}set questionTime(e){this._questionTime=e}get tipTime(){return this._tipTime}set tipTime(e){this._tipTime=e}get qrTime(){return this._qrTime}set qrTime(e){this._qrTime=e}get showContextMenu(){return this._showContextMenu}set showContextMenu(e){this._showContextMenu=e}get showMouse(){return this._showMouse}set showMouse(e){this._showMouse=e}get isDebug(){return this._isDebug}set isDebug(e){this._isDebug=e}}
function _defineProperty(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}class LanguagesManager{constructor(a){_defineProperty(this,"getLanguage",(a=>{fetch(a).then((a=>a.json())).then(this.loadDataByLanguage).catch(this.loadDataByDefault)})),_defineProperty(this,"loadDataByLanguage",((a,t)=>{console.log("loadDataByLanguage"),a!=this._currentLanguage&&(this._currentLanguage="string"==typeof a?a:null==a?"es":a.lang);var e="json/"+this._currentLanguage+"_data.json";console.log(e),t?$.ajax({url:e,type:"post",dataType:"json",success:this.parseChangedData,error:()=>{console.log("Error al cargar config.json")}}):$.ajax({url:e,type:"post",dataType:"json",success:this.parseDataByLanguage,error:()=>{console.log("Error al cargar config.json")}})})),_defineProperty(this,"loadDataByDefault",(()=>{var a="json/"+this._currentLanguage+"_data.json";$.ajax({url:a,type:"post",dataType:"json",success:this.parseDataByLanguage,error:()=>{console.log("Error al cargar config.json")}})})),_defineProperty(this,"parseDataByLanguage",(a=>{this._languageData=a,this.textAlign=a.align,this.currentLanguageData=a.content;var t=new CustomEvent("onLoadByLanguage",{detail:a});document.dispatchEvent(t)})),_defineProperty(this,"parseChangedData",(a=>{this._languageData=a,this.textAlign=a.align,this.currentLanguageData=a.content;var t=new CustomEvent("onLoadChangedData",{detail:a});document.dispatchEvent(t)})),this._currentLanguage=a,this._languageData=[],this._textAlign="left"}get currentLanguage(){return this._currentLanguage}set currentLanguage(a){this._currentLanguage=a}get currentLanguageData(){return this._languageData}set currentLanguageData(a){this._languageData=a}get textAlign(){return this._textAlign}set textAlign(a){this._textAlign=a}}
function _defineProperty(e,d,t){return d in e?Object.defineProperty(e,d,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[d]=t,e}class IddleManager{constructor(){_defineProperty(this,"setIddleMode",(e=>{this.timeToIddle=e,document.dispatchEvent(this._onIddleMode)})),_defineProperty(this,"returnFromIddle",(()=>{document.dispatchEvent(this._offIddleMode)})),this._isIddle=!0,this._timeToIddle,this._onIddleMode=new CustomEvent("onIddleMode"),this._offIddleMode=new CustomEvent("offIddleMode")}get isIddle(){return this._isIddle}set isIddle(e){this._isIddle=e}get timeToIddle(){return this._timeToIddle}set timeToIddle(e){this._timeToIddle=e}}
var ProjectUtils=function(){return{getSlickSliderObject:function(e){return $.extend(!0,{infinite:!1,slidesToShow:4,slidesToScroll:4,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},e)},replaceUrlParam:function(e,t,n){null==n&&(n="");var o=new RegExp("\\b("+t+"=).*?(&|#|$)");return e.search(o)>=0?e.replace(o,"$1"+n+"$2"):(e=e.replace(/[?#]$/,""))+(e.indexOf("?")>0?"&":"?")+t+"="+n},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},toastr:function(e,t){toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,positionClass:"toast-bottom-left",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.info(t,e)},alert:function(e,t,n=["cerrar"],o=[void 0,void 0],l="success",r=!1,c="",s=""){var u;(u=n.length>1?{title:e,html:t,type:l,showCancelButton:!0,confirmButtonText:n[0],cancelButtonText:n[1],reverseButtons:!0,timerProgressBar:!0}:{title:e,html:t,type:l,confirmButtonText:n[0],reverseButtons:!1,timerProgressBar:!0}).confirmButtonColor="#0c6a8d",u.cancelButtonColor="#d33",r&&(u.allowOutsideClick=u.allowEscapeKey=u.allowEnterKey=!1),Swal.fire(u).then((function(e){e.value?null!=o[0]&&o[0]():n.length>1&&null!=o[1]&&o[1]()}))},distanceBetweenTwoPoints:function(e,t,n,o){return Math.hypot(n-e,o-t)},percentToPixels:function(e,t){return e*$(document).width()/100},addConsoleLogForMobile:function(){let e=document.createElement("div");document.body.appendChild(e),eruda.init({container:e,tool:["console","elements","network","resource","info","sources"]})},fullScreenMode:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},copyToClipboard:function(){var e=document.getElementById("share-url");return e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),"texto copiado al portapapeles"},exitFullScreenMode:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}};
function _defineProperty(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}class Helpers{constructor(){_defineProperty(this,"blockStage",(e=>{$.blockUI({message:'<h1><img src="private/css/busy.gif" /> '+e+"</h1>"})})),_defineProperty(this,"unblockStage",(()=>{$.unblockUI()})),_defineProperty(this,"ajaxCall",((e,o,r,l,n="post",c="json")=>{$.ajax({headers:{accept:"application/json","Access-Control-Allow-Origin":"*"},url:e,headers:"*",type:n,dataType:c,crossDomain:!0,cache:!1,data:o,success:function(e){null!=r?r(e):console.log(e)},error:function(e,o,r){console.log(e,o,r),null!=l?l(e,o,r):console.log("Ojo, te falto definir el callback error")}})}))}}
function _defineProperty(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class AudioManager{constructor(){_defineProperty(this,"resetPlayer",(()=>{this.isPlaying=!1,this.isOpen=!1,this._audio.pause(),this._audio.currentTime=0})),_defineProperty(this,"onPauseAudioCompleted",(()=>{this.isPlaying=!1,this._audioIsPaused=!0,this._audio.pause(),TweenMax.delayedCall(10,this.removePlayer)})),_defineProperty(this,"removePlayer",(()=>{console.log("paso X tiempo desde que se pauso!")})),_defineProperty(this,"onReanudeAudio",(()=>{this._audioIsPaused=!1,this.isPlaying=!0})),_defineProperty(this,"pauseAudio",(()=>{var e=this._audio;this._audioVolume.var=1;var i=this._audioVolume;TweenMax.to(i,this._fadeOutTime,{var:0,onUpdate:function(){e.volume=i.var},onComplete:this.onPauseAudioCompleted})})),_defineProperty(this,"resumeAudio",(()=>{this._audio.play();var e=this._audio;this._audioVolume.var=0;var i=this._audioVolume;TweenMax.to(i,this._fadeInTime,{var:1,onUpdate:function(){e.volume=i.var},onComplete:this.onReanudeAudio})})),_defineProperty(this,"seekAudioTo",(e=>{var i=e*this._audio.duration/100;isNaN(i)||(this._audio.currentTime=e*this._audio.duration/100)})),this._assetId,this._lastId,this._audioVolume={var:1},this._isPlaying=!1,this._audioIsPaused=!1,this._fadeInTime=.3,this._fadeOutTime=.3,this._defaultVolume=1,this._isOpen=!1,this._audio=new Audio,this._instanceName="",this._playerId}setAudio(e,i){this._assetId=i,this._audioPath=e,this._audio.setAttribute("src",this._audioPath),this._audio.volume=this._defaultVolume,this._audio.load(),this._audio.play();var t=this.instanceName,a=this.playerId,s=new CustomEvent("onAudioStart",{detail:{instanceName:t,playerId:a}});document.dispatchEvent(s),this._audio.onended=function(){this._isOpen=!1;var e=new CustomEvent("onEnded",{detail:{instanceName:t,playerId:a}});document.dispatchEvent(e)},this._audio.ontimeupdate=function(){var e=new CustomEvent("onTimeUpdate",{detail:{currentTime:this.currentTime,duration:this.duration,instanceName:t}});document.dispatchEvent(e)},this._isPlaying=!0,this._lastId=this._assetId,this._isOpen=!0}get isPlaying(){return this._isPlaying}set isPlaying(e){this._isPlaying=e}get audioPath(){return this._audioPath}set audioPath(e){this._audioPath=e}get isOpen(){return this._isOpen}set isOpen(e){this._isOpen=e}get instanceName(){return this._instanceName}set instanceName(e){this._instanceName=e}get playerId(){return this._playerId}set playerId(e){this._playerId=e}}
function _defineProperty(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class VideoManager{constructor(){_defineProperty(this,"loadVideo",((e,i,t)=>{console.log("load video?"),this._mainVideo=videojs(e,{language:"es"}),this._currentVideo=i,this._subtitles=t,$(".vjs-tech").attr("src",this._currentVideo),this._mainVideo.play(),document.dispatchEvent(this._onVideoStart),this.addListeners(),this.animateIn()})),_defineProperty(this,"addListeners",(()=>{alert("adding listeners");var e=this.closePlayer;this._mainVideo.ready((function(){})),this._mainVideo.on("error",(function(){e("error")})),this._mainVideo.on("ended",(function(){console.log("corre?"),e("ended")})),$(".overlay").on("click",(function(i){i.target==this&&e("overlay")})),$(".close-btn").on("click",(function(i){e("button")}))})),_defineProperty(this,"animateIn",(()=>{$(".overlay").css("display","block"),$(".cont-video").css({opacity:"1",display:"block"}),TweenMax.to($(".overlay"),.5,{opacity:1})})),_defineProperty(this,"closePlayer",(e=>{console.log("clossing player"),this._mainVideo.off("error"),this._mainVideo.off("ended"),this._mainVideo.pause(),this._mainVideo.currentTime(0);var i=this._onVideoEnd,t=this._onVideoError,o=e;this._isPlayerOpen=!1,TweenMax.to($(".overlay"),.5,{opacity:0,ease:Power3.easeOut,onComplete:function(){console.log("origin: "+o),"error"==o?document.dispatchEvent(t):document.dispatchEvent(i),$(".overlay").css("display","none"),$(".cont-video").css({opacity:"0",display:"none"}),$(".cont-image").css({opacity:"0",display:"none"})}})})),_defineProperty(this,"pauseVideo",(()=>{this._mainVideo.pause(),this._isPlaying=!1})),_defineProperty(this,"stopVideo",(()=>{console.log(this._mainVideo),this._mainVideo.pause(),this._mainVideo.currentTime(0),this._isPlaying=!1})),_defineProperty(this,"reanudeVideo",(()=>{this._mainVideo.play(),this._isPlaying=!0})),_defineProperty(this,"loadTracks",((e,i)=>{for(var t=this._mainVideo,o=this._mainVideo.textTracks(),n=0;n<o.length;n++)o.removeTrack(o[n]);$.each(e,((e,i)=>{t.addRemoteTextTrack({srclang:e,src:i},!1)})),this.changeTrack(i)})),_defineProperty(this,"changeTrack",(e=>{for(var i=this._mainVideo.textTracks(),t=0;t<i.length;t++){var o=i[t];o.mode="hidden",o.language===e&&(o.mode="showing")}})),_defineProperty(this,"goToTime",(e=>{console.log("Go to time: "+e),this._mainVideo.currentTime(e)})),this._testering="ok",this._mainVideo,this._currentVideo,this._subtitles,this._onVideoStart=new CustomEvent("onVideoStart"),this._onVideoEnd=new CustomEvent("onVideoEnd"),this._onVideoError=new CustomEvent("onVideoError"),this._isPlayerOpen=!1}get currentPlayer(){return this._mainVideo}set currentPlayer(e){this._mainVideo=e}get isPlaying(){return this._isPlaying}set isPlaying(e){this._isPlaying=e}get isPlayerOpen(){return this._isPlayerOpen}set isPlayerOpen(e){this._isPlayerOpen=e}}
/*!
 * imagesLoaded PACKAGED v4.1.3
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,(function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=0,o=i[n];t=t||[];for(var s=this._onceEvents&&this._onceEvents[e];o;){var r=s&&s[o];r&&(this.off(e,o),delete s[o]),o.apply(this,t),o=i[n+=r?0:1]}return this}},t.allOff=t.removeAllListeners=function(){delete this._events,delete this._onceEvents},e})),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],(function(i){return t(e,i)})):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,(function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e,t,o){return this instanceof n?("string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=function(e){var t=[];if(Array.isArray(e))t=e;else if("number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t}(e),this.options=i({},this.options),"function"==typeof t?o=t:i(this.options,t),o&&this.on("always",o),this.getImages(),r&&(this.jqDeferred=new r.Deferred),void setTimeout(function(){this.check()}.bind(this))):new n(e,t,o)}function o(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var r=e.jQuery,h=e.console;n.prototype=Object.create(t.prototype),n.prototype.options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&a[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var s=e.querySelectorAll(this.options.background);for(n=0;n<s.length;n++){var r=s[n];this.addElementBackgroundImages(r)}}}};var a={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},n.prototype.addImage=function(e){var t=new o(e);this.images.push(t)},n.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},n.prototype.check=function(){function e(e,i,n){setTimeout((function(){t.progress(e,i,n)}))}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach((function(t){t.once("progress",e),t.check()})):void this.complete()},n.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,e,t)},n.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},o.prototype=Object.create(t.prototype),o.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(o.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},n.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((r=t).fn.imagesLoaded=function(e,t){return new n(this,e,t).jqDeferred.promise(r(this))})},n.makeJQueryPlugin(),n}));
window.Revealer=class{constructor(e,t){this.CONFIG={hidden:!1,color:"#fff"},Object.assign(this.CONFIG,t),this.DOM={},this.DOM.item=e,this.layout()}layout(){this.allClasses=["revealer--visible","revealer--right","revealer--left","revealer--top","revealer--bottom","revealer--showX","revealer--showY","revealer--hideX","revealer--hideY"],this.revealerEl=document.createElement("div"),this.revealerEl.className="revealer",this.revealerEl.style.backgroundColor=this.CONFIG.color,this.DOM.item.appendChild(this.revealerEl),this.CONFIG.hidden&&this.revealerEl.classList.add("revealer--visible")}show(e){return this.toggle(e,"show")}hide(e){return this.toggle(e,"hide")}toggle(e,t){return new Promise(((r,i)=>{e?(this.animate(e,t),this.revealerEl.addEventListener("animationend",r)):(this.revealerEl.classList.remove(...this.allClasses),this.revealerEl.classList.add("revealer--visible"),r())}))}showFilled(e){return new Promise(((t,r)=>{this.hide(),e.target=this.DOM.item,e.target.style.visibility="hidden",this.animate(e,"hide");let i=()=>{e.target.removeEventListener("animationend",i),e.target=this.revealerEl,this.animate(e,"show"),e.target.addEventListener("animationend",(r=>{r.target===e.target&&t()}))};e.target.addEventListener("animationend",i)}))}hideFilled(e){return new Promise(((t,r)=>{this.animate(e,"hide");let i=()=>{this.revealerEl.removeEventListener("animationend",i),e.target=this.DOM.item,this.animate(e,"show"),e.target.addEventListener("animationend",(r=>{r.target===e.target&&t()}))};this.revealerEl.addEventListener("animationend",i)}))}animate(e,t){setTimeout((()=>{const r=e.target||this.revealerEl;r.style.visibility="visible",r.classList.remove(...this.allClasses);let i="revealer--right",a="h";"rtl"===e.direction?(i="hide"===t?"revealer--right":"revealer--left",a="h"):"ltr"===e.direction?(i="hide"===t?"revealer--left":"revealer--right",a="h"):"ttb"===e.direction?(i="hide"===t?"revealer--top":"revealer--bottom",a="v"):"btt"===e.direction&&(i="hide"===t?"revealer--bottom":"revealer--top",a="v"),r.classList.add(i,"h"===a?`revealer--${t}X`:`revealer--${t}Y`)}),e.delay||0)}};
"use strict";var artists,Project=function(){var e,t,a=new ProjectConfig,i=(new ProjectUtils,new Helpers,new IddleManager),o=!0,n=new AudioManager;n.instanceName="uiSounds",n.playerId=0;var d=0,r=new VideoManager;r.currentPlayer=videojs("videoReference",{language:"es"});var s=!1,c=function(e){alert("start")},l=function(e){alert("end")},g=function(t){var i;a.setDefaults(),1==a.rememberLanguage&&null!=(i=localStorage.getItem("language"))&&null!=i||(i=a.defaultLanguage),(e=new LanguagesManager(a.defaultLanguage)).loadDataByLanguage(a.defaultLanguage,!1)},u=function(e){console.log("onEnterIddleMode callback")},m=function(e){e.detail.content;v()},v=()=>{p()},p=()=>{sections=e.currentLanguageData.sections,h(sections),i.setIddleMode(a.iddleTimeCheck)},h=e=>{var t="";$.each(e,(function(e,a){parseInt(e);var i=parseInt(e)-1,o=parseInt(e)+1;a.isHome?(t+='<div class="grid grid--layout-'+e+' grid--current">',$.each(a.photos,(function(e,a){t+='<h3 class="grid__item grid__item--title grid__item--title-home" style="grid-area: '+a.sectionNameGrid+'"">'+a.sectionName+"</h3>",t+='<div class="grid__item grid__item-home" data-section="'+a.section+'" data-direction="'+a.direction+'" data-delay="'+a.delay+'" style="background-image: url(images/webp/'+a.jpg+"); grid-area: "+a.gridArea+'"></div>'})),t+='<h2 class="grid__item grid__item--name"></h2>',t+='<p class="grid__item grid__item--text"></p>',t+="</div>"):(t+='<div class="grid grid--layout-'+e+'">',a.hasVideo?$.each(a.photos,(function(e,a){0==a.isVideo||null==a.isVideo?t+='<div class="grid__item grid__item-expand" data-photo="'+e+'" data-direction="'+a.direction+'" data-delay="'+a.delay+'" style="background-image: url(images/webp/'+a.jpg+"); grid-area: "+a.gridArea+'"></div>':t+='<div class="grid__item grid__item-video" data-video="'+e+'" data-direction="'+a.direction+'" data-delay="'+a.delay+'" style="background-image: url(images/webp/'+a.jpg+"); grid-area: "+a.gridArea+'"><span><i class="fas fa-play"></i></span></div>'})):$.each(a.photos,(function(e,a){t+='<div class="grid__item grid__item-expand" data-photo="'+e+'" data-direction="'+a.direction+'" data-delay="'+a.delay+'" style="background-image: url(images/webp/'+a.jpg+"); grid-area: "+a.gridArea+'"></div>'})),t+='<div class="grid__item grid__item--nav grid__item--nav-prev" data-section="'+i+'" style="grid-area: '+a.navPrevGrid+'"><svg class="icon icon--nav-arrow"><use xlink:href="#icon-nav-arrow"></use></svg></div>',t+='<div class="grid__item grid__item--nav grid__item--nav-next" data-section="'+o+'" style="grid-area: '+a.navNextGrid+'"><svg class="icon icon--nav-arrow"><use xlink:href="#icon-nav-arrow"></use></svg></div>',t+='<h2 class="grid__item grid__item--name"></h2>',t+='<h3 class="grid__item grid__item--title"style=" grid-area: '+a.titleGrid+'">'+a.title+"</h3>",t+='<p class="grid__item grid__item--text">'+a.subtitle+"</p>",t+="</div>")})),$(".grid-container").html(t)},_=function(e){var t=$(this).attr("data-section");d=t,console.log("currentSection"),console.log(d)},f=function(){console.log("open photo gallery"),M();var e=$(this).attr("data-photo"),t="",a="";$.each(sections,(function(e,i){e==d&&$.each(i.photos,(function(e,i){0!=i.isVideo&&null!=i.isVideo||(0==e?(t+='<div class="carousel-item active">',a+='<li data-target="#gallery" data-slide-to="'+e+'" class="active"></li>'):(t+='<div class="carousel-item">',a+='<li data-target="#gallery" data-slide-to="'+e+'"></li>'),t+='<div class="image-container">',t+='<img src="images/webp/'+i.jpg+'" class="d-block img-fluid" alt="Casa Rosada">',t+='<div class="carousel-caption d-none d-block">',t+='<span class="epigraph">'+i.epigraph+"</span>",t+="</div>",t+="</div>",t+="</div>")}))})),$("#gallery .carousel-inner").html(t),$("#gallery .carousel-indicators").html(a),setTimeout((()=>{TweenMax.to($(".gallery-container"),.5,{opacity:"1",ease:Power3.easeOut,onStart:()=>{$(".carousel").carousel(parseInt(e)),$(".gallery-container").css("display","block")},onComplete:()=>{C()}})}),2e3)},y=function(e){console.log("close gallery"),M(),e.target===this&&TweenMax.to($(".gallery-container"),.5,{opacity:"0",ease:Power3.easeOut,onComplete:()=>{$(".gallery-container").css("display","none"),C()}})},w=function(){var e,t=$(this).attr("data-video");$.each(sections,(function(a,i){a==d&&$.each(i.photos,(function(a,i){a==t&&(e=i.video,$(".video-epigraph").html(i.epigraph))}))})),$(".vjs-tech").attr("src","videos/"+e),$(".vjs-tech").on("ended",(function(){b(),$(".vjs-tech").off("ended")})),$(".vjs-tech").on("start",(function(){})),TweenMax.to($(".video-container"),.5,{opacity:"1",ease:Power3.easeOut,onStart:()=>{$(".video-container").css("display","block"),r.goToTime(0)},onComplete:()=>{r.reanudeVideo()}})},b=function(){console.log("closeVideo"),M(),TweenMax.to($(".video-container"),.5,{opacity:"0",ease:Power3.easeOut,onComplete:()=>{$(".video-container").css("display","none"),C()}}),r.stopVideo()},k=function(){console.log("open lola video"),M(),$(".vjs-tech").attr("src","videos/"+e.currentLanguageData.lolaVideo),$(".vjs-tech").on("ended",(function(){b(),$(".vjs-tech").off("ended")})),$(".video-epigraph").html(""),TweenMax.to($(".video-container"),.5,{opacity:"1",ease:Power3.easeOut,onStart:()=>{$(".video-container").css("display","block")},onComplete:()=>{r.reanudeVideo(),C()}})},I=function(){console.log("active app");var e=$(this).attr("data-section");d=e,console.log(d),i.returnFromIddle()},j=function(){i.isIddle||(t=setTimeout((()=>{i.isIddle=!0,o||(o=!0,console.log("gotohome"))}),i.timeToIddle))},L=function(){window.clearTimeout(t),j()},x=function(){console.log("iddle.isIddle"),console.log(i.isIddle),i.isIddle&&(i.isIddle=!1,o=!1)},M=function(){console.log("blockUi... from main.js"),s||(s=!0,$.blockUI({message:null,overlayCSS:{backgroundColor:"#000",opacity:"0"}}))},C=function(){console.log("unBlockUi...from main.js"),s&&(s=!1,$.unblockUI())};return{init:function(){a.getData(),$(".grid-container").on("touchstart",".grid__item-home",I),$(".grid-container").on("touchstart",".grid__item-expand",f),$(".grid-container").on("touchstart",".grid__item--nav",_),$(".grid-container").on("touchstart",".grid__item-video",w),$(".btn-lola").on("touchstart",k),$(".close-video-container").on("touchstart",b),$(".close-gallery").on("touchstart",y),$(document).keypress((function(e){switch(e.keyCode?e.keyCode:e.which){case 109:a.toggleMouse();break;case 110:a.toggleContextMenu()}})),window.addEventListener("touchstart",L),document.addEventListener("onLoad",g),document.addEventListener("onLoadByLanguage",m),document.addEventListener("onEnter",u),document.addEventListener("onIddleMode",j),document.addEventListener("offIddleMode",x),document.addEventListener("onVideoStart",c),document.addEventListener("onVideoEnd",l)}}}();$(document).ready((function(){Project.init()}));
setTimeout((()=>{var t=!0,e=!1;const i=(t,e,i)=>{let s;return()=>{let o=this,n=arguments,r=i&&!s;clearTimeout(s),s=setTimeout((()=>{s=null,i||t.apply(o,n)}),e),r&&t.apply(o,n)}};let s={width:window.innerWidth,height:window.innerHeight},o={x:s.width/2,y:s.height/2};class n{constructor(t,e){this.CONFIG={filledColor:"#fff"},Object.assign(this.CONFIG,e),this.DOM={},this.DOM.el=t;const i=this.DOM.el.getBoundingClientRect();this.itemCenter={x:i.left+i.width/2,y:i.top+i.height/2},this.revealer=new Revealer(this.DOM.el,{color:this.CONFIG.filledColor||window.getComputedStyle(document.body,null).backgroundColor}),this.initEvents()}initEvents(){window.addEventListener("resize",(t=>i(this.onresize())))}onresize(t){const e=this.DOM.el.getBoundingClientRect();this.itemCenter={x:e.left+e.width/2,y:e.top+e.height/2}}show(t=!0){return t?this.revealer.show({direction:this.DOM.el.dataset.direction||"rtl",delay:this.DOM.el.dataset.delay||0}):this.revealer.show()}hide(t=!0){return t?this.revealer.hide({direction:this.DOM.el.dataset.direction||"rtl",delay:this.DOM.el.dataset.delay||0}):this.revealer.hide()}showFilled(){return this.revealer.showFilled({direction:this.DOM.el.dataset.direction||"rtl",delay:this.DOM.el.dataset.delay||0})}hideFilled(){return this.revealer.hideFilled({direction:this.DOM.el.dataset.direction||"rtl",delay:this.DOM.el.dataset.delay||0})}setTransform(t){const e=((t,e,i,s)=>{const o=t-e,n=i-s;return Math.sqrt(o*o+n*n)})(this.itemCenter.x,this.itemCenter.y,o.x,o.y),i=t.translateX/s.width*e||0,n=t.translateY/s.height*e||0;this.DOM.el.style.transform=`translate3d(${i}px, ${n}px, 0)`}isNavCtrl(){return this.DOM.el.classList.contains("grid__item--nav")}}class r{constructor(t,e){this.CONFIG={filledColor:"#fff"},Object.assign(this.CONFIG,e),this.DOM={},this.DOM.el=t,this.DOM.items=Array.from(this.DOM.el.querySelectorAll("div.grid__item")),this.DOM.name=this.DOM.el.querySelector(".grid__item--name"),this.DOM.title=this.DOM.el.querySelector(".grid__item--title"),this.DOM.text=this.DOM.el.querySelector(".grid__item--text"),this.textElems=[this.DOM.name,this.DOM.title,this.DOM.text],this.layout()}layout(){this.itemsTotal=this.DOM.items.length,this.items=[],this.DOM.items.forEach((t=>this.items.push(new n(t,{filledColor:this.CONFIG.filledColor}))))}show(t=!1,e=!0){return new Promise(((i,s)=>{this.DOM.el.classList.add("grid--animating"),this.hideItems(),this.DOM.el.classList.add("grid--current");const o=[];for(let i=0;i<this.itemsTotal;i++){const s=t?this.items[i].showFilled():this.items[i].show(e);o.push(s)}for(let t=0,e=this.textElems.length;t<e;t++){const e=this.animateText(this.textElems[t],"In");o.push(e)}Promise.all(o).then((()=>{this.resetTextClasses("In"),this.DOM.el.classList.remove("grid--animating"),i()}))}))}hide(t=!1,e=!0){return new Promise(((i,s)=>{this.DOM.el.classList.add("grid--animating");const o=[];for(let i=0;i<this.itemsTotal;i++){const s=t?this.items[i].hideFilled():this.items[i].hide(e);o.push(s)}for(let t=0,e=this.textElems.length;t<e;t++){const e=this.animateText(this.textElems[t],"Out");o.push(e)}Promise.all(o).then((()=>{this.resetTextClasses("Out"),this.DOM.el.classList.remove("grid--animating"),this.DOM.el.classList.remove("grid--current"),i()}))}))}animateText(t,e){return new Promise(((i,s)=>{t.classList.add(`grid__item--animate${e}`),t.addEventListener("animationend",i)}))}resetTextClasses(t){for(let e=0,i=this.textElems.length;e<i;e++)this.textElems[e].classList.remove(`grid__item--animate${t}`)}hideItems(){for(let t=0;t<this.itemsTotal;t++)this.items[t].hide(!1)}tilt(t){for(let e=0;e<this.itemsTotal;e++){const i=this.items[e];i.isNavCtrl()||i.setTransform(t)}}}window.Slideshow=class{constructor(t,e){this.CONFIG={filledColor:!1,hasTilt:!1,tilt:{maxTranslationX:50,maxTranslationY:50}},Object.assign(this.CONFIG,e),this.DOM={},this.DOM.grids=t,this.init()}init(){this.current=0,this.gridsTotal=this.DOM.grids.length,this.grids=[],this.DOM.grids.forEach((t=>this.grids.push(new r(t,{filledColor:this.CONFIG.filledColor})))),this.initEvents(),this.iddleTimeOut}initEvents(){window.addEventListener("touchstart",(()=>this.resetTimer())),this.startIddleMode(),document.querySelector(".btn-menu").addEventListener("touchstart",(()=>this.returnHome())),document.querySelector(".btn-menu-bottom").addEventListener("touchstart",(()=>this.returnHome())),Array.from(document.querySelectorAll(".grid__item-home")).forEach((t=>t.addEventListener("touchstart",(t=>this.goToSection(t))))),Array.from(document.querySelectorAll(".grid__item--nav-next")).forEach((t=>t.addEventListener("touchstart",(t=>this.navigate(t,"next"))))),Array.from(document.querySelectorAll(".grid__item--nav-prev")).forEach((t=>t.addEventListener("touchstart",(t=>this.navigate(t,"prev")))))}onresize(t){s={width:window.innerWidth,height:window.innerHeight},o={x:s.width/2,y:s.height/2}}navigate(e,i){if(console.log(`navigate.. direction: ${i}`),console.log(`isAnimating: ${this.isAnimating}`),this.blockStage(),this.isAnimating)return!1;this.isAnimating=!0;const s=this.grids[this.current];let o=document.querySelectorAll(".grid__item-expand");for(let t=0;t<o.length;t++)o[t].classList.add("pointer-none");let n=document.querySelectorAll(".grid__item-video");for(let t=0;t<n.length;t++)n[t].classList.add("pointer-none");setTimeout((()=>{let t=document.querySelectorAll(".grid__item-expand");for(let e=0;e<t.length;e++)t[e].classList.remove("pointer-none");let e=document.querySelectorAll(".grid__item-video");for(let t=0;t<e.length;t++)e[t].classList.remove("pointer-none");this.unBlockStage(),console.log("desbloqueamos aca...")}),3e3),"next"===i?this.current<this.gridsTotal-1?this.current=this.current+1:this.current=0:this.current>0?this.current=this.current-1:this.current=this.gridsTotal-1,0==this.current&&(t=!0,document.querySelector(".btn-menu").classList.contains("active")&&document.querySelector(".btn-menu").classList.remove("active"),document.querySelector(".btn-menu-bottom").classList.contains("active")&&document.querySelector(".btn-menu-bottom").classList.remove("active"),document.body.classList.contains("home")||document.body.classList.add("home"));const r=this.grids[this.current],l=this.CONFIG.filledColor;s.hide(!!l).then((()=>{r.show(!!l).then((()=>this.isAnimating=!1))}))}goToSection(e){if(console.log("GO TO SECTION"),console.log(`isAnimating: ${this.isAnimating}`),this.blockStage(),t=!1,this.isAnimating)return!1;this.isAnimating=!0;const i=this.grids[this.current],s=e.target.getAttribute("data-section");this.current=parseInt(s);const o=this.grids[this.current],n=this.CONFIG.filledColor;setTimeout((()=>{let t=document.querySelectorAll(".grid__item-expand");for(let e=0;e<t.length;e++)t[e].classList.remove("pointer-none");let e=document.querySelectorAll(".grid__item-video");for(let t=0;t<e.length;t++)e[t].classList.remove("pointer-none");this.unBlockStage(),console.log("mostrar botones go home"),setTimeout((()=>{document.querySelector(".btn-menu").style.display="block",document.querySelector(".btn-menu-bottom").style.display="block"}),600)}),3e3),document.querySelector(".btn-menu").classList.contains("active")||document.querySelector(".btn-menu").classList.add("active"),document.querySelector(".btn-menu-bottom").classList.contains("active")||document.querySelector(".btn-menu-bottom").classList.add("active"),i.hide(!!n).then((()=>{o.show(!!n).then((()=>this.isAnimating=!1))})),document.body.classList.contains("home")&&document.body.classList.remove("home")}returnHome(){if(console.log("RETURN HOME.."),console.log(`isAnimating: ${this.isAnimating}`),this.blockStage(),document.querySelector(".btn-menu").style.display="none",document.querySelector(".btn-menu-bottom").style.display="none",t=!0,this.isAnimating)return!1;this.isAnimating=!0;const e=this.grids[this.current];this.current=0;const i=this.CONFIG.filledColor,s=this.grids[this.current];setTimeout((()=>{console.log("volvimos a la home, termino animacion..."),this.unBlockStage()}),2e3),document.querySelector(".btn-menu").classList.contains("active")&&document.querySelector(".btn-menu").classList.remove("active"),document.querySelector(".btn-menu-bottom").classList.contains("active")&&document.querySelector(".btn-menu-bottom").classList.remove("active"),e.hide(!!i).then((()=>{s.show(!!i).then((()=>this.isAnimating=!1))})),document.body.classList.contains("home")||document.body.classList.add("home")}resetTimer(){console.log("reseteando el timer"),window.clearTimeout(this.iddleTimeOut),this.startIddleMode()}startIddleMode(){this.iddleTimeOut=setTimeout((()=>{t||this.isAnimating||(this.returnHome(),console.log("volvio a la home"))}),3e5)}blockStage(){console.log("blockUi...from demo.js ..."),e||(e=!0,$.blockUI({message:null,overlayCSS:{backgroundColor:"#00f",opacity:"0"}}))}unBlockStage(){console.log("unBlockUi... from demo.js ..."),e&&(e=!1,$.unblockUI())}}}),2500);
//# sourceMappingURL=../maps/main.min.js.map
